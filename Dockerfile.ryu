FROM python:3.9-slim

RUN apt-get update && apt-get install -y --no-install-recommends \
    net-tools iputils-ping \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/*

RUN pip install ryu==4.34

RUN pip install eventlet==0.30.2

WORKDIR /app

COPY ryu.py /app/ryu.py

CMD ["ryu-manager", "/app/ryu.py", "ryu.app.rest_qos", "ryu.app.ofctl_rest", "ryu.app.rest_topology"]